import{_ as a,c as s,a as e,o as t}from"./app-DyHmJYok.js";const l="/assets/%E7%BC%93%E5%86%B2%E5%8C%BA%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B-DbMYRCt_.png",p="/assets/%E7%BC%93%E5%86%B2%E5%8C%BA%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B-CyMttPoo.png",c={};function i(o,n){return t(),s("div",null,[...n[0]||(n[0]=[e(`<h1 id="缓冲区对象" tabindex="-1"><a class="header-anchor" href="#缓冲区对象"><span>缓冲区对象</span></a></h1><h2 id="什么是缓冲区对象" tabindex="-1"><a class="header-anchor" href="#什么是缓冲区对象"><span>什么是缓冲区对象</span></a></h2><p>缓冲区对象是WebGL系统中的一块内存区域，可以一次性地向缓冲区对象中填充大量的顶点数据，然后将这些数据保存在其中，供顶点着色器使用。</p><h3 id="类型化数组" tabindex="-1"><a class="header-anchor" href="#类型化数组"><span>类型化数组</span></a></h3><p>在WebGL中，需要处理大量的相同类型数据，所以引入类型化数组，这样程序就可以预知到数组中的数据类型，提高性能。</p><h3 id="创建缓冲区对象" tabindex="-1"><a class="header-anchor" href="#创建缓冲区对象"><span>创建缓冲区对象</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">const</span> buffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>gl.createBuffer()</code> 是WebGL中创建缓冲区对象的核心方法。这个函数不接受任何参数，返回一个缓冲区对象的引用。如果创建失败，会返回null。</p><p>创建缓冲区对象后，它只是一个空的容器，需要通过<code>gl.bindBuffer()</code>将其绑定到特定目标上，才能进行后续的数据操作。通常，我们会将创建的缓冲区对象绑定到<code>gl.ARRAY_BUFFER</code>（用于存储顶点数据）或<code>gl.ELEMENT_ARRAY_BUFFER</code>（用于存储顶点索引）目标上。</p><h3 id="主要api函数" tabindex="-1"><a class="header-anchor" href="#主要api函数"><span>主要API函数</span></a></h3><h4 id="gl-bindbuffer-target-buffer" tabindex="-1"><a class="header-anchor" href="#gl-bindbuffer-target-buffer"><span>gl.bindBuffer(target, buffer)</span></a></h4><p>将缓冲区对象绑定到目标上，使后续对缓冲区的操作生效。</p><ul><li><code>target</code>: 指定缓冲区目标 <ul><li><code>gl.ARRAY_BUFFER</code>: 表示缓冲区存储的是顶点的数据</li><li><code>gl.ELEMENT_ARRAY_BUFFER</code>: 表示缓冲区存储的是顶点的索引值</li></ul></li><li><code>buffer</code>: 指定要绑定的缓冲区对象</li></ul><h4 id="gl-bufferdata-target-data-usage" tabindex="-1"><a class="header-anchor" href="#gl-bufferdata-target-data-usage"><span>gl.bufferData(target, data, usage)</span></a></h4><p>将数据写入缓冲区对象。</p><ul><li><code>target</code>: 类型同<code>gl.bindBuffer</code>中的target</li><li><code>data</code>: 写入缓冲区的顶点数据，如程序中的points</li><li><code>usage</code>: 表示如何使用缓冲区对象中的数据，分为以下几类 <ul><li><code>gl.STATIC_DRAW</code>: 写入一次，多次绘制</li><li><code>gl.STREAM_DRAW</code>: 写入一次，绘制若干次</li><li><code>gl.DYNAMIC_DRAW</code>: 写入多次，绘制多次</li></ul></li></ul><h4 id="gl-vertexattribpointer-location-size-type-normalized-stride-offset" tabindex="-1"><a class="header-anchor" href="#gl-vertexattribpointer-location-size-type-normalized-stride-offset"><span>gl.vertexAttribPointer(location, size, type, normalized, stride, offset)</span></a></h4><p>指定顶点属性的数据格式和位置。</p><ul><li><code>location</code>: attribute变量的存储位置</li><li><code>size</code>: 指定每个顶点所使用数据的个数</li><li><code>type</code>: 指定数据类型（如gl.FLOAT）</li><li><code>normalized</code>: 指定是否将非浮点数数据归一化到[0,1]或[-1,1]区间</li><li><code>stride</code>: 指定相邻两个顶点之间的字节数</li><li><code>offset</code>: 指定缓冲区中顶点数据的偏移量</li></ul><h2 id="缓冲区使用流程" tabindex="-1"><a class="header-anchor" href="#缓冲区使用流程"><span>缓冲区使用流程</span></a></h2><p><img src="`+l+'" alt=""></p><h2 id="缓冲区执行过程" tabindex="-1"><a class="header-anchor" href="#缓冲区执行过程"><span>缓冲区执行过程</span></a></h2><p><img src="'+p+`" alt=""></p><h2 id="代码示例" tabindex="-1"><a class="header-anchor" href="#代码示例"><span>代码示例</span></a></h2><p>以下是一个完整的创建和绑定缓冲区对象的示例：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">// 1. 创建缓冲区对象</span></span>
<span class="line"><span class="token keyword">const</span> vertexBuffer <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. 将缓冲区对象绑定到目标上</span></span>
<span class="line">gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> vertexBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. 向缓冲区对象中写入数据</span></span>
<span class="line"><span class="token keyword">const</span> vertices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">  <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token number">0.0</span><span class="token punctuation">,</span>  <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">gl<span class="token punctuation">.</span><span class="token function">bufferData</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> vertices<span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">STATIC_DRAW</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4. 解绑缓冲区</span></span>
<span class="line">gl<span class="token punctuation">.</span><span class="token function">bindBuffer</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">ARRAY_BUFFER</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,26)])])}const u=a(c,[["render",i],["__file","huanchongquduixiang.html.vue"]]),d=JSON.parse('{"path":"/blogs/WebGL/2025/huanchongquduixiang.html","title":"缓冲区对象","lang":"en-US","frontmatter":{"title":"缓冲区对象","date":"2025-10-01T00:00:00.000Z","tags":["WebGL"],"categories":["WebGL"]},"headers":[{"level":2,"title":"什么是缓冲区对象","slug":"什么是缓冲区对象","link":"#什么是缓冲区对象","children":[{"level":3,"title":"类型化数组","slug":"类型化数组","link":"#类型化数组","children":[]},{"level":3,"title":"创建缓冲区对象","slug":"创建缓冲区对象","link":"#创建缓冲区对象","children":[]},{"level":3,"title":"主要API函数","slug":"主要api函数","link":"#主要api函数","children":[]}]},{"level":2,"title":"缓冲区使用流程","slug":"缓冲区使用流程","link":"#缓冲区使用流程","children":[]},{"level":2,"title":"缓冲区执行过程","slug":"缓冲区执行过程","link":"#缓冲区执行过程","children":[]},{"level":2,"title":"代码示例","slug":"代码示例","link":"#代码示例","children":[]}],"git":{"createdTime":1759313968000,"updatedTime":1759313968000,"contributors":[{"name":"Pcjmy","email":"1716045191@qq.com","commits":1}]},"filePathRelative":"blogs/WebGL/2025/缓冲区对象.md"}');export{u as comp,d as data};
